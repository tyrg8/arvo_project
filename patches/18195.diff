commit c613b006cf2df5783315f0499b9d628a44c8b9e7
Author: Cristy <mikayla-grace@urban-warrior.org>
Date:   Tue Oct 15 19:31:34 2019 -0400

    https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=18265

diff --git a/MagickCore/color.c b/MagickCore/color.c
index 24b707cf0..227611b60 100644
--- a/MagickCore/color.c
+++ b/MagickCore/color.c
@@ -1926,290 +1926,290 @@ MagickExport MagickBooleanType ListColorInfo(FILE *file,
   /*
     List name and attributes of each color in the list.
   */
   if (file == (const FILE *) NULL)
     file=stdout;
   color_info=GetColorInfoList("*",&number_colors,exception);
   if (color_info == (const ColorInfo **) NULL)
     return(MagickFalse);
   path=(const char *) NULL;
   for (i=0; i < (ssize_t) number_colors; i++)
   {
     if (color_info[i]->stealth != MagickFalse)
       continue;
     if ((path == (const char *) NULL) ||
         (LocaleCompare(path,color_info[i]->path) != 0))
       {
         if (color_info[i]->path != (char *) NULL)
           (void) FormatLocaleFile(file,"\nPath: %s\n\n",color_info[i]->path);
         (void) FormatLocaleFile(file,
           "Name                  Color                  "
           "                       Compliance\n");
         (void) FormatLocaleFile(file,
           "-------------------------------------------------"
           "------------------------------\n");
       }
     path=color_info[i]->path;
     (void) FormatLocaleFile(file,"%-21.21s ",color_info[i]->name);
     GetColorTuple(&color_info[i]->color,MagickFalse,tuple);
     (void) FormatLocaleFile(file,"%-45.45s ",tuple);
     if ((color_info[i]->compliance & SVGCompliance) != 0)
       (void) FormatLocaleFile(file,"SVG ");
     if ((color_info[i]->compliance & X11Compliance) != 0)
       (void) FormatLocaleFile(file,"X11 ");
     if ((color_info[i]->compliance & XPMCompliance) != 0)
       (void) FormatLocaleFile(file,"XPM ");
     (void) FormatLocaleFile(file,"\n");
   }
   color_info=(const ColorInfo **) RelinquishMagickMemory((void *) color_info);
   (void) fflush(file);
   return(MagickTrue);
 }
 
 /*
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 %                                                                             %
 %                                                                             %
 %                                                                             %
 +   L o a d C o l o r C a c h e                                               %
 %                                                                             %
 %                                                                             %
 %                                                                             %
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 %
 %  LoadColorCache() loads the color configurations which provides a mapping
 %  between color attributes and a color name.
 %
 %  The format of the LoadColorCache method is:
 %
 %      MagickBooleanType LoadColorCache(LinkedListInfo *cache,const char *xml,
 %        const char *filename,const size_t depth,ExceptionInfo *exception)
 %
 %  A description of each parameter follows:
 %
 %    o xml:  The color list in XML format.
 %
 %    o filename:  The color list filename.
 %
 %    o depth: depth of <include /> statements.
 %
 %    o exception: return any errors or warnings in this structure.
 %
 */
 static MagickBooleanType LoadColorCache(LinkedListInfo *cache,const char *xml,
   const char *filename,const size_t depth,ExceptionInfo *exception)
 {
   char
     keyword[MagickPathExtent],
     *token;
 
   ColorInfo
     *color_info;
 
   const char
     *q;
 
   MagickStatusType
     status;
 
   size_t
     extent;
 
   /*
     Load the color map file.
   */
   (void) LogMagickEvent(ConfigureEvent,GetMagickModule(),
     "Loading color file \"%s\" ...",filename);
   if (xml == (char *) NULL)
     return(MagickFalse);
   status=MagickTrue;
   color_info=(ColorInfo *) NULL;
   token=AcquireString(xml);
   extent=strlen(token)+MagickPathExtent;
   for (q=(char *) xml; *q != '\0'; )
   {
     /*
       Interpret XML.
     */
     (void) GetNextToken(q,&q,extent,token);
     if (*token == '\0')
       break;
     (void) CopyMagickString(keyword,token,MagickPathExtent);
     if (LocaleNCompare(keyword,"<!DOCTYPE",9) == 0)
       {
         /*
           Doctype element.
         */
         while ((LocaleNCompare(q,"]>",2) != 0) && (*q != '\0'))
           (void) GetNextToken(q,&q,extent,token);
         continue;
       }
     if (LocaleNCompare(keyword,"<!--",4) == 0)
       {
         /*
           Comment element.
         */
         while ((LocaleNCompare(q,"->",2) != 0) && (*q != '\0'))
           (void) GetNextToken(q,&q,extent,token);
         continue;
       }
     if (LocaleCompare(keyword,"<include") == 0)
       {
         /*
           Include element.
         */
         while (((*token != '/') && (*(token+1) != '>')) && (*q != '\0'))
         {
           (void) CopyMagickString(keyword,token,MagickPathExtent);
           (void) GetNextToken(q,&q,extent,token);
           if (*token != '=')
             continue;
           (void) GetNextToken(q,&q,extent,token);
           if (LocaleCompare(keyword,"file") == 0)
             {
               if (depth > MagickMaxRecursionDepth)
                 (void) ThrowMagickException(exception,GetMagickModule(),
                   ConfigureError,"IncludeElementNestedTooDeeply","`%s'",token);
               else
                 {
                   char
                     path[MagickPathExtent],
                     *file_xml;
 
                   GetPathComponent(filename,HeadPath,path);
                   if (*path != '\0')
                     (void) ConcatenateMagickString(path,DirectorySeparator,
                       MagickPathExtent);
                   if (*token == *DirectorySeparator)
                     (void) CopyMagickString(path,token,MagickPathExtent);
                   else
                     (void) ConcatenateMagickString(path,token,MagickPathExtent);
                   file_xml=FileToXML(path,~0UL);
                   if (file_xml != (char *) NULL)
                     {
                       status&=LoadColorCache(cache,file_xml,path,depth+1,
                         exception);
                       file_xml=DestroyString(file_xml);
                     }
                 }
             }
         }
         continue;
       }
     if (LocaleCompare(keyword,"<color") == 0)
       {
         /*
           Color element.
         */
         color_info=(ColorInfo *) AcquireCriticalMemory(sizeof(*color_info));
         (void) memset(color_info,0,sizeof(*color_info));
         color_info->path=ConstantString(filename);
         color_info->exempt=MagickFalse;
         color_info->signature=MagickCoreSignature;
         continue;
       }
     if (color_info == (ColorInfo *) NULL)
       continue;
     if ((LocaleCompare(keyword,"/>") == 0) ||
         (LocaleCompare(keyword,"</policy>") == 0))
       {
         status=AppendValueToLinkedList(cache,color_info);
         if (status == MagickFalse)
           (void) ThrowMagickException(exception,GetMagickModule(),
             ResourceLimitError,"MemoryAllocationFailed","`%s'",
             color_info->name);
         color_info=(ColorInfo *) NULL;
         continue;
       }
     (void) GetNextToken(q,(const char **) NULL,extent,token);
     if (*token != '=')
       continue;
     (void) GetNextToken(q,&q,extent,token);
     (void) GetNextToken(q,&q,extent,token);
     switch (*keyword)
     {
       case 'C':
       case 'c':
       {
         if (LocaleCompare((char *) keyword,"color") == 0)
           {
             (void) QueryColorCompliance(token,AllCompliance,&color_info->color,
               exception);
             break;
           }
         if (LocaleCompare((char *) keyword,"compliance") == 0)
           {
             ssize_t
               compliance;
 
             compliance=color_info->compliance;
-            if (GlobExpression(token,"*SVG*",MagickTrue) != MagickFalse)
+            if (strcasestr(token,"SVG") != (char *) NULL)
               compliance|=SVGCompliance;
-            if (GlobExpression(token,"*X11*",MagickTrue) != MagickFalse)
+            if (strcasestr(token,"X11") != (char *) NULL)
               compliance|=X11Compliance;
-            if (GlobExpression(token,"*XPM*",MagickTrue) != MagickFalse)
+            if (strcasestr(token,"XPM") != (char *) NULL)
               compliance|=XPMCompliance;
             color_info->compliance=(ComplianceType) compliance;
             break;
           }
         break;
       }
       case 'N':
       case 'n':
       {
         if (LocaleCompare((char *) keyword,"name") == 0)
           {
             color_info->name=ConstantString(token);
             break;
           }
         break;
       }
       case 'S':
       case 's':
       {
         if (LocaleCompare((char *) keyword,"stealth") == 0)
           {
             color_info->stealth=IsStringTrue(token);
             break;
           }
         break;
       }
       default:
         break;
     }
   }
   token=(char *) RelinquishMagickMemory(token);
   return(status != 0 ? MagickTrue : MagickFalse);
 }
 
 /*
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 %                                                                             %
 %                                                                             %
 %                                                                             %
 +   Q u e r y C o l o r C o m p l i a n c e                                   %
 %                                                                             %
 %                                                                             %
 %                                                                             %
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 %
 %  QueryColorCompliance() returns the red, green, blue, and alpha intensities
 %  for a given color name and standards compliance.
 %
 %  The format of the QueryColorCompliance method is:
 %
 %      MagickBooleanType QueryColorCompliance(const char *name,
 %        const ComplianceType compliance,PixelInfo *color,
 %        ExceptionInfo *exception)
 %
 %  A description of each parameter follows:
 %
 %    o name: the color name (e.g. white, blue, yellow).
 %
 %    o compliance: Adhere to this color standard: SVG, X11, or XPM.
 %
 %    o color: the red, green, blue, and opacity intensities values of the
 %      named color in this structure.
 %
 %    o exception: return any errors or warnings in this structure.
 %
 */
diff --git a/MagickCore/nt-base.h b/MagickCore/nt-base.h
index fc2314de0..139ccdfae 100644
--- a/MagickCore/nt-base.h
+++ b/MagickCore/nt-base.h
@@ -24,293 +24,296 @@
 #if defined(__cplusplus) || defined(c_plusplus)
 extern "C" {
 #endif
 
 #if defined(MAGICKCORE_WINDOWS_SUPPORT)
 
 #define WIN32_LEAN_AND_MEAN
 #define VC_EXTRALEAN
 #define _CRT_SECURE_NO_DEPRECATE  1
 #include <windows.h>
 #include <wchar.h>
 #include <winuser.h>
 #include <wingdi.h>
 #include <io.h>
 #include <process.h>
 #include <errno.h>
 #include <malloc.h>
 #include <sys/utime.h>
 #if defined(_DEBUG) && !defined(__MINGW32__)
 #include <crtdbg.h>
 #endif
 
 #define PROT_READ  0x01
 #define PROT_WRITE  0x02
 #define MAP_SHARED  0x01
 #define MAP_PRIVATE  0x02
 #define MAP_ANONYMOUS  0x20
 #define F_OK 0
 #define R_OK 4
 #define W_OK 2
 #define RW_OK 6
 #define _SC_PAGESIZE 1
 #define _SC_PHYS_PAGES 2
 #define _SC_OPEN_MAX 3
 #if !defined(SSIZE_MAX)
 #define SSIZE_MAX  0x7fffffffL
 #endif
 
 /*
   _MSC_VER values:
     1100 MSVC 5.0
     1200 MSVC 6.0
     1300 MSVC 7.0 Visual C++ .NET 2002
     1310 Visual c++ .NET 2003
     1400 Visual C++ 2005
     1500 Visual C++ 2008
     1600 Visual C++ 2010
     1700 Visual C++ 2012
     1800 Visual C++ 2013
     1900 Visual C++ 2015
 */
 
 #if !defined(chsize)
 # if defined(__BORLANDC__)
 #   define chsize(file,length)  chsize(file,length)
 # else
 #   define chsize(file,length)  _chsize(file,length)
 # endif
 #endif
 
 #if !defined(access)
 #if defined(_VISUALC_) && (_MSC_VER >= 1400)
 #  define access(path,mode)  _access_s(path,mode)
 #endif
 #endif
 #if !defined(chdir)
 #  define chdir  _chdir
 #endif
 #if !defined(close)
 #  define close  _close
 #endif
 #if !defined(closedir)
 #  define closedir(directory)  NTCloseDirectory(directory)
 #endif
 #define MAGICKCORE_HAVE_ERF
 #if defined(_VISUALC_) && (_MSC_VER < 1700)
 #  define erf(x)  NTErf(x)
 #endif
 #if !defined(fdopen)
 #  define fdopen  _fdopen
 #endif
 #if !defined(fileno)
 #  define fileno  _fileno
 #endif
 #if !defined(freelocale)
 #  define freelocale  _free_locale
 #endif
 #if !defined(fseek) && !defined(__MINGW32__)
 #if defined(MAGICKCORE_WINDOWS_SUPPORT) && !defined(Windows95) && \
   !(defined(_MSC_VER) && (_MSC_VER < 1400)) && \
   !(defined(__MSVCRT_VERSION__) && (__MSVCRT_VERSION__ < 0x800))
 #  define fseek  _fseeki64
 #endif
 #endif
 #if !defined(fstat) && !defined(__BORLANDC__)
 #if defined(MAGICKCORE_WINDOWS_SUPPORT) && !defined(Windows95) && \
   !(defined(_MSC_VER) && (_MSC_VER < 1400)) && \
   !(defined(__MSVCRT_VERSION__) && (__MSVCRT_VERSION__ < 0x800))
 #  define fstat  _fstati64
 #else
 #  define fstat  _fstat
 #endif
 #endif
 #if !defined(fsync)
 #  define fsync  _commit
 #endif
 #if !defined(ftell) && !defined(__MINGW32__)
 #if defined(MAGICKCORE_WINDOWS_SUPPORT) && !defined(Windows95) && \
   !(defined(_MSC_VER) && (_MSC_VER < 1400)) && \
   !(defined(__MSVCRT_VERSION__) && (__MSVCRT_VERSION__ < 0x800))
 #  define ftell  _ftelli64
 #endif
 #endif
 #if !defined(ftruncate)
 #  define ftruncate(file,length)  NTTruncateFile(file,length)
 #endif
 #if !defined(getcwd)
 #  define getcwd  _getcwd
 #endif
 #if !defined(getpid)
 #  define getpid  _getpid
 #endif
 #if !defined(hypot)
 #  define hypot  _hypot
 #endif
 #if !defined(isatty)
 #  define isatty  _isatty
 #endif
 #if !defined(locale_t)
 #define locale_t _locale_t
 #endif
 #if defined(MAGICKCORE_WINDOWS_SUPPORT) && !defined(Windows95) && \
   !(defined(_MSC_VER) && (_MSC_VER < 1400)) && \
   !(defined(__MSVCRT_VERSION__) && (__MSVCRT_VERSION__ < 0x800))
 #if !defined(lseek)
 #  define lseek  _lseeki64
 #endif
 #else
 #if !defined(lseek)
 #  define lseek  _lseek
 #endif
 #endif
 #if !defined(MAGICKCORE_LTDL_DELEGATE)
 #if !defined(lt_dlclose)
 #  define lt_dlclose(handle)  NTCloseLibrary(handle)
 #endif
 #if !defined(lt_dlerror)
 #  define lt_dlerror()  NTGetLibraryError()
 #endif
 #if !defined(lt_dlexit)
 #  define lt_dlexit()  NTExitLibrary()
 #endif
 #if !defined(lt_dlinit)
 #  define lt_dlinit()  NTInitializeLibrary()
 #endif
 #if !defined(lt_dlopen)
 #  define lt_dlopen(filename)  NTOpenLibrary(filename)
 #endif
 #if !defined(lt_dlsetsearchpath)
 #  define lt_dlsetsearchpath(path)  NTSetSearchPath(path)
 #endif
 #if !defined(lt_dlsym)
 #  define lt_dlsym(handle,name)  NTGetLibrarySymbol(handle,name)
 #endif
 #endif
 #if !defined(mkdir)
 #  define mkdir  _mkdir
 #endif
 #if !defined(mmap)
 #  define mmap(address,length,protection,access,file,offset) \
   NTMapMemory(address,length,protection,access,file,offset)
 #endif
 #if !defined(msync)
 #  define msync(address,length,flags)  NTSyncMemory(address,length,flags)
 #endif
 #if !defined(munmap)
 #  define munmap(address,length)  NTUnmapMemory(address,length)
 #endif
 #if !defined(opendir)
 #  define opendir(directory)  NTOpenDirectory(directory)
 #endif
 #if !defined(open)
 #  define open  _open
 #endif
 #if !defined(pclose)
 #  define pclose  _pclose
 #endif
 #if !defined(popen)
 #  define popen  _popen
 #endif
 #if !defined(fprintf_l)
 #define fprintf_l  _fprintf_s_l
 #endif
 #if !defined(read)
 #  define read(fd,buffer,count)  _read(fd,buffer,(unsigned int) count)
 #endif
 #if !defined(readdir)
 #  define readdir(directory)  NTReadDirectory(directory)
 #endif
 #if !defined(seekdir)
 #  define seekdir(directory,offset)  NTSeekDirectory(directory,offset)
 #endif
 #if !defined(setmode)
 #  define setmode  _setmode
 #endif
 #if !defined(spawnvp)
 #  define spawnvp  _spawnvp
 #endif
 #if !defined(strtod_l)
 #define strtod_l  _strtod_l
 #endif
 #if !defined(stat) && !defined(__BORLANDC__)
 #if defined(MAGICKCORE_WINDOWS_SUPPORT) && !defined(Windows95) && \
   !(defined(_MSC_VER) && (_MSC_VER < 1400)) && \
   !(defined(__MSVCRT_VERSION__) && (__MSVCRT_VERSION__ < 0x800))
 #  define stat  _stati64
 #else
 #  define stat  _stat
 #endif
 #endif
 #if !defined(strcasecmp)
 #  define strcasecmp  _stricmp
 #endif
+#if !defined(strcasestr)
+#  define strcasestr  StrStrIA
+#endif
 #if !defined(strncasecmp)
 #  define strncasecmp  _strnicmp
 #endif
 #if !defined(sysconf)
 #  define sysconf(name)  NTSystemConfiguration(name)
 #endif
 #if defined(MAGICKCORE_WINDOWS_SUPPORT) && !defined(Windows95) && \
   !(defined(_MSC_VER) && (_MSC_VER < 1400)) && \
   !(defined(__MSVCRT_VERSION__) && (__MSVCRT_VERSION__ < 0x800))
 #  define tell  _telli64
 #else
 #  define tell  _tell
 #endif
 #if !defined(telldir)
 #  define telldir(directory)  NTTellDirectory(directory)
 #endif
 #if !defined(tempnam)
 #  define tempnam  _tempnam_s
 #endif
 #if !defined(tolower_l)
 #define tolower_l  _tolower_l
 #endif
 #if !defined(toupper_l)
 #define toupper_l  _toupper_l
 #endif
 #if !defined(umask)
 #  define umask  _umask
 #endif
 #if !defined(unlink)
 #  define unlink  _unlink
 #endif
 #if !defined(utime)
 #  define utime(filename,time)  _utime(filename,(struct _utimbuf*) time)
 #endif
 #if !defined(vfprintf_l)
 #define vfprintf_l  _vfprintf_l
 #endif
 #if !defined(vsnprintf)
 #if !defined(_MSC_VER) || (defined(_MSC_VER) && _MSC_VER < 1500)
 #define vsnprintf _vsnprintf
 #endif
 #endif
 #if !defined(vsnprintf_l)
 #define vsnprintf_l  _vsnprintf_l
 #endif
 #if !defined(write)
 #  define write(fd,buffer,count)  _write(fd,buffer,(unsigned int) count)
 #endif
 #if !defined(wstat) && !defined(__BORLANDC__)
 #if defined(MAGICKCORE_WINDOWS_SUPPORT) && !defined(Windows95) && \
   !(defined(_MSC_VER) && (_MSC_VER < 1400)) && \
   !(defined(__MSVCRT_VERSION__) && (__MSVCRT_VERSION__ < 0x800))
 #  define wstat  _wstati64
 #else
 #  define wstat  _wstat
 #endif
 #endif
 
 #if defined(__BORLANDC__)
 #undef _O_RANDOM
 #define _O_RANDOM 0
 #undef _O_SEQUENTIAL
 #define _O_SEQUENTIAL 0
 #undef _O_SHORT_LIVED
 #define _O_SHORT_LIVED 0
 #undef _O_TEMPORARY
 #define _O_TEMPORARY 0
 #endif
 
 #undef gettimeofday
diff --git a/coders/ps.c b/coders/ps.c
index 50aef44eb..af69804c2 100644
--- a/coders/ps.c
+++ b/coders/ps.c
@@ -204,290 +204,290 @@ static inline int ProfileInteger(MagickByteBuffer *buffer,short int *hex_digits)
 static void ReadPSInfo(const ImageInfo *image_info,Image *image,
   PSInfo *ps_info,ExceptionInfo *exception)
 {
 #define BeginDocument  "BeginDocument:"
 #define EndDocument  "EndDocument:"
 #define PostscriptLevel  "!PS-"
 #define ImageData  "ImageData:"
 #define DocumentProcessColors  "DocumentProcessColors:"
 #define CMYKCustomColor  "CMYKCustomColor:"
 #define CMYKProcessColor  "CMYKProcessColor:"
 #define DocumentCustomColors  "DocumentCustomColors:"
 #define SpotColor  "+ "
 #define BoundingBox  "BoundingBox:"
 #define DocumentMedia  "DocumentMedia:"
 #define HiResBoundingBox  "HiResBoundingBox:"
 #define PageBoundingBox  "PageBoundingBox:"
 #define PageMedia  "PageMedia:"
 #define ICCProfile "BeginICCProfile:"
 #define PhotoshopProfile  "BeginPhotoshop:"
 
   char
     version[MagickPathExtent];
 
   int
     c;
 
   MagickBooleanType
     skip;
 
   MagickByteBuffer
     buffer;
 
   register char
     *p;
 
   register ssize_t
     i;
 
   SegmentInfo
     bounds;
 
   size_t
     length;
 
   ssize_t
     count,
     priority;
 
   short int
     hex_digits[256];
 
   unsigned long
     spotcolor;
 
   (void) memset(&bounds,0,sizeof(bounds));
   (void) memset(ps_info,0,sizeof(*ps_info));
   ps_info->cmyk=image_info->colorspace == CMYKColorspace ? MagickTrue :
     MagickFalse;
   /*
     Initialize hex values.
   */
   (void) memset(hex_digits,0,sizeof(hex_digits));
   hex_digits[(int) '0']=0;
   hex_digits[(int) '1']=1;
   hex_digits[(int) '2']=2;
   hex_digits[(int) '3']=3;
   hex_digits[(int) '4']=4;
   hex_digits[(int) '5']=5;
   hex_digits[(int) '6']=6;
   hex_digits[(int) '7']=7;
   hex_digits[(int) '8']=8;
   hex_digits[(int) '9']=9;
   hex_digits[(int) 'a']=10;
   hex_digits[(int) 'b']=11;
   hex_digits[(int) 'c']=12;
   hex_digits[(int) 'd']=13;
   hex_digits[(int) 'e']=14;
   hex_digits[(int) 'f']=15;
   hex_digits[(int) 'A']=10;
   hex_digits[(int) 'B']=11;
   hex_digits[(int) 'C']=12;
   hex_digits[(int) 'D']=13;
   hex_digits[(int) 'E']=14;
   hex_digits[(int) 'F']=15;
   priority=0;
   *version='\0';
   spotcolor=0;
   skip=MagickFalse;
   (void) memset(&buffer,0,sizeof(buffer));
   buffer.image=image;
   for (c=ReadMagickByteBuffer(&buffer); c != EOF; c=ReadMagickByteBuffer(&buffer))
   {
     switch(c)
     {
       case '<':
       {
         ReadGhostScriptXMPProfile(&buffer,&ps_info->xmp_profile);
         continue;
       }
       case '\n':
       case '\r':
       case '%':
         break;
       default:
         continue;
     }
     /*
       Skip %%BeginDocument thru %%EndDocument.
     */
     if (CompareMagickByteBuffer(&buffer,BeginDocument,strlen(BeginDocument)) != MagickFalse)
       skip=MagickTrue;
     if (CompareMagickByteBuffer(&buffer,EndDocument,strlen(EndDocument)) != MagickFalse)
       skip=MagickFalse;
     if (skip != MagickFalse)
       continue;
     if ((*version == '\0') &&
         (CompareMagickByteBuffer(&buffer,PostscriptLevel,strlen(PostscriptLevel)) != MagickFalse))
       {
         i=0;
         for (c=ReadMagickByteBuffer(&buffer); c != EOF; c=ReadMagickByteBuffer(&buffer))
         {
           if ((c == '\r') || (c == '\n') || ((i+1) == sizeof(version)))
             break;
           version[i++]=(char) c;
         }
         version[i]='\0';
       }
     if (CompareMagickByteBuffer(&buffer,ImageData,strlen(ImageData)) != MagickFalse)
       {
         p=GetMagickByteBufferDatum(&buffer);
         (void) sscanf(p,ImageData " %lu %lu",&ps_info->columns,&ps_info->rows);
       }
     /*
       Is this a CMYK document?
     */
     length=strlen(DocumentProcessColors);
     if (CompareMagickByteBuffer(&buffer,DocumentProcessColors,length) != MagickFalse)
       {
         p=GetMagickByteBufferDatum(&buffer);
-        if ((GlobExpression(p,"*Cyan*",MagickTrue) != MagickFalse) ||
-            (GlobExpression(p,"*Magenta*",MagickTrue) != MagickFalse) ||
-            (GlobExpression(p,"*Yellow*",MagickTrue) != MagickFalse))
+        if ((strcasestr(p,"Cyan") != (char *) NULL) ||
+            (strcasestr(p,"Magenta") != (char *) NULL) ||
+            (strcasestr(p,"Yellow") != (char *) NULL))
           ps_info->cmyk=MagickTrue;
       }
     if (CompareMagickByteBuffer(&buffer,CMYKCustomColor,strlen(CMYKCustomColor)) != MagickFalse)
       ps_info->cmyk=MagickTrue;
     if (CompareMagickByteBuffer(&buffer,CMYKProcessColor,strlen(CMYKProcessColor)) != MagickFalse)
       ps_info->cmyk=MagickTrue;
     length=strlen(DocumentCustomColors);
     if ((CompareMagickByteBuffer(&buffer,DocumentCustomColors,length) != MagickFalse) ||
         (CompareMagickByteBuffer(&buffer,CMYKCustomColor,strlen(CMYKCustomColor)) != MagickFalse) ||
         (CompareMagickByteBuffer(&buffer,SpotColor,strlen(SpotColor)) != MagickFalse))
       {
         char
           name[MagickPathExtent],
           property[MagickPathExtent],
           *value;
 
         /*
           Note spot names.
         */
         (void) FormatLocaleString(property,MagickPathExtent,
           "pdf:SpotColor-%.20g",(double) spotcolor++);
         i=0;
         for (c=ReadMagickByteBuffer(&buffer); c != EOF; c=ReadMagickByteBuffer(&buffer))
         {
           if ((isspace(c) != 0) || ((i+1) == sizeof(name)))
             break;
           name[i++]=(char) c;
         }
         name[i]='\0';
         value=ConstantString(name);
         (void) SubstituteString(&value,"(","");
         (void) SubstituteString(&value,")","");
         (void) StripString(value);
         if (*value != '\0')
           (void) SetImageProperty(image,property,value,exception);
         value=DestroyString(value);
         continue;
       }
     if ((ps_info->icc_profile == (StringInfo *) NULL) &&
         (CompareMagickByteBuffer(&buffer,ICCProfile,strlen(ICCProfile)) != MagickFalse))
       {
         unsigned char
           *datum;
 
         /*
           Read ICC profile.
         */
         ps_info->icc_profile=AcquireStringInfo(MagickPathExtent);
         datum=GetStringInfoDatum(ps_info->icc_profile);
         for (i=0; (c=ProfileInteger(&buffer,hex_digits)) != EOF; i++)
         {
           if (i >= (ssize_t) GetStringInfoLength(ps_info->icc_profile))
             {
               SetStringInfoLength(ps_info->icc_profile,(size_t) i << 1);
               datum=GetStringInfoDatum(ps_info->icc_profile);
             }
           datum[i]=(unsigned char) c;
         }
         SetStringInfoLength(ps_info->icc_profile,(size_t) i+1);
         continue;
       }
     if ((ps_info->photoshop_profile == (StringInfo *) NULL) &&
         (CompareMagickByteBuffer(&buffer,PhotoshopProfile,strlen(PhotoshopProfile)) != MagickFalse))
       {
         unsigned char
           *q;
 
         unsigned long
           extent;
 
         /*
           Read Photoshop profile.
         */
         p=GetMagickByteBufferDatum(&buffer);
         extent=0;
         count=(ssize_t) sscanf(p,PhotoshopProfile " %lu",&extent);
         if ((count != 1) || (extent == 0))
           continue;
         if ((MagickSizeType) extent > GetBlobSize(image))
           continue;
         length=(size_t) extent;
         ps_info->photoshop_profile=AcquireStringInfo(length+1U);
         q=GetStringInfoDatum(ps_info->photoshop_profile);
         while (extent > 0)
         {
           c=ProfileInteger(&buffer,hex_digits);
           if (c == EOF)
             break;
           *q++=(unsigned char) c;
           extent-=MagickMin(extent,2);
         }
         SetStringInfoLength(ps_info->photoshop_profile,length);
         continue;
       }
     if (image_info->page != (char *) NULL)
       continue;
     /*
       Note region defined by bounding box.
     */
     count=0;
     i=0;
     if (CompareMagickByteBuffer(&buffer,BoundingBox,strlen(BoundingBox)) != MagickFalse)
       {
         p=GetMagickByteBufferDatum(&buffer);
         count=(ssize_t) sscanf(p,BoundingBox " %lf %lf %lf %lf",
           &bounds.x1,&bounds.y1,&bounds.x2,&bounds.y2);
         i=2;
       }
     if (CompareMagickByteBuffer(&buffer,DocumentMedia,strlen(DocumentMedia)) != MagickFalse)
       {
         p=GetMagickByteBufferDatum(&buffer);
         count=(ssize_t) sscanf(p,DocumentMedia " %lf %lf %lf %lf",
           &bounds.x1,&bounds.y1,&bounds.x2,&bounds.y2);
         i=1;
       }
     if (CompareMagickByteBuffer(&buffer,HiResBoundingBox,strlen(HiResBoundingBox)) != MagickFalse)
       {
         p=GetMagickByteBufferDatum(&buffer);
         count=(ssize_t) sscanf(p,HiResBoundingBox " %lf %lf %lf %lf",
           &bounds.x1,&bounds.y1,&bounds.x2,&bounds.y2);
         i=3;
       }
     if (CompareMagickByteBuffer(&buffer,PageBoundingBox,strlen(PageBoundingBox)) != MagickFalse)
       {
         p=GetMagickByteBufferDatum(&buffer);
         count=(ssize_t) sscanf(p,PageBoundingBox " %lf %lf %lf %lf",
           &bounds.x1,&bounds.y1,&bounds.x2,&bounds.y2);
         i=1;
       }
     if (CompareMagickByteBuffer(&buffer,PageMedia,strlen(PageMedia)) != MagickFalse)
       {
         p=GetMagickByteBufferDatum(&buffer);
         count=(ssize_t) sscanf(p,PageMedia " %lf %lf %lf %lf",
           &bounds.x1,&bounds.y1,&bounds.x2,&bounds.y2);
         i=1;
       }
     if ((count != 4) || (i < (ssize_t) priority))
       continue;
     if ((fabs(bounds.x2-bounds.x1) <= fabs(ps_info->bounds.x2-ps_info->bounds.x1)) ||
         (fabs(bounds.y2-bounds.y1) <= fabs(ps_info->bounds.y2-ps_info->bounds.y1)))
       if (i ==  (ssize_t) priority)
         continue;
     ps_info->bounds=bounds;
     priority=i;
   }
   if (version[0] != '\0')
     (void) SetImageProperty(image,"ps:Level",version,exception);
 }
diff --git a/config/config.h.in b/config/config.h.in
index 42538eb0a..4f15dbede 100644
--- a/config/config.h.in
+++ b/config/config.h.in
@@ -1,1189 +1,1192 @@
 /* config/config.h.in.  Generated from configure.ac by autoheader.  */
 
 /* Define if building universal (internal helper macro) */
 #undef AC_APPLE_UNIVERSAL_BUILD
 
 /* Define if you have AUTOTRACE library */
 #undef AUTOTRACE_DELEGATE
 
 /* Define if coders and filters are to be built as modules. */
 #undef BUILD_MODULES
 
 /* Define if you have the bzip2 library */
 #undef BZLIB_DELEGATE
 
 /* Define if you have CAIRO library */
 #undef CAIRO_DELEGATE
 
 /* permit enciphering and deciphering image pixels */
 #undef CIPHER_SUPPORT
 
 /* Define to 1 if the `closedir' function returns void instead of `int'. */
 #undef CLOSEDIR_VOID
 
 /* coders subdirectory. */
 #undef CODER_DIRNAME
 
 /* Directory where architecture-dependent configuration files live. */
 #undef CONFIGURE_PATH
 
 /* Subdirectory of lib where architecture-dependent configuration files live.
    */
 #undef CONFIGURE_RELATIVE_PATH
 
 /* Define if you have DJVU library */
 #undef DJVU_DELEGATE
 
 /* Directory where ImageMagick documents live. */
 #undef DOCUMENTATION_PATH
 
 /* Define if you have Display Postscript */
 #undef DPS_DELEGATE
 
 /* exclude deprecated methods in MagickCore API */
 #undef EXCLUDE_DEPRECATED
 
 /* Directory where executables are installed. */
 #undef EXECUTABLE_PATH
 
 /* Define if you have FFTW library */
 #undef FFTW_DELEGATE
 
 /* filter subdirectory. */
 #undef FILTER_DIRNAME
 
 /* Define if you have FLIF library */
 #undef FLIF_DELEGATE
 
 /* Define if you have FONTCONFIG library */
 #undef FONTCONFIG_DELEGATE
 
 /* Define if you have FlashPIX library */
 #undef FPX_DELEGATE
 
 /* Define if you have FREETYPE library */
 #undef FREETYPE_DELEGATE
 
 /* Define if you have Ghostscript library or framework */
 #undef GS_DELEGATE
 
 /* Define if you have GVC library */
 #undef GVC_DELEGATE
 
 /* Define to 1 if you have the `acosh' function. */
 #undef HAVE_ACOSH
 
 /* Define to 1 if you have the <arm/limits.h> header file. */
 #undef HAVE_ARM_LIMITS_H
 
 /* Define to 1 if you have the <arpa/inet.h> header file. */
 #undef HAVE_ARPA_INET_H
 
 /* Define to 1 if you have the `asinh' function. */
 #undef HAVE_ASINH
 
 /* Define to 1 if you have the `atanh' function. */
 #undef HAVE_ATANH
 
 /* Define to 1 if you have the `atexit' function. */
 #undef HAVE_ATEXIT
 
 /* Define to 1 if you have the `atoll' function. */
 #undef HAVE_ATOLL
 
 /* define if bool is a built-in type */
 #undef HAVE_BOOL
 
 /* Define to 1 if you have the `cabs' function. */
 #undef HAVE_CABS
 
 /* Define to 1 if you have the `carg' function. */
 #undef HAVE_CARG
 
 /* Define to 1 if you have the `cimag' function. */
 #undef HAVE_CIMAG
 
 /* Define to 1 if you have the `clock' function. */
 #undef HAVE_CLOCK
 
 /* Define to 1 if you have the `clock_getres' function. */
 #undef HAVE_CLOCK_GETRES
 
 /* Define to 1 if you have the `clock_gettime' function. */
 #undef HAVE_CLOCK_GETTIME
 
 /* Define to 1 if clock_gettime supports CLOCK_REALTIME. */
 #undef HAVE_CLOCK_REALTIME
 
 /* Define to 1 if you have the <CL/cl.h> header file. */
 #undef HAVE_CL_CL_H
 
 /* Define to 1 if you have the <complex.h> header file. */
 #undef HAVE_COMPLEX_H
 
 /* Define to 1 if you have the `creal' function. */
 #undef HAVE_CREAL
 
 /* Define to 1 if you have the `ctime_r' function. */
 #undef HAVE_CTIME_R
 
 /* Define to 1 if you have the declaration of `pread', and to 0 if you don't.
    */
 #undef HAVE_DECL_PREAD
 
 /* Define to 1 if you have the declaration of `pwrite', and to 0 if you don't.
    */
 #undef HAVE_DECL_PWRITE
 
 /* Define to 1 if you have the declaration of `strerror_r', and to 0 if you
    don't. */
 #undef HAVE_DECL_STRERROR_R
 
 /* Define to 1 if you have the declaration of `strlcpy', and to 0 if you
    don't. */
 #undef HAVE_DECL_STRLCPY
 
 /* Define to 1 if you have the declaration of `tzname', and to 0 if you don't.
    */
 #undef HAVE_DECL_TZNAME
 
 /* Define to 1 if you have the declaration of `vsnprintf', and to 0 if you
    don't. */
 #undef HAVE_DECL_VSNPRINTF
 
 /* Define to 1 if you have the `directio' function. */
 #undef HAVE_DIRECTIO
 
 /* Define to 1 if you have the <dirent.h> header file, and it defines `DIR'.
    */
 #undef HAVE_DIRENT_H
 
 /* Define to 1 if you have the <dlfcn.h> header file. */
 #undef HAVE_DLFCN_H
 
 /* Define to 1 if you don't have `vprintf' but do have `_doprnt.' */
 #undef HAVE_DOPRNT
 
 /* Define to 1 if the system has the type `double_t'. */
 #undef HAVE_DOUBLE_T
 
 /* Define to 1 if you have the `erf' function. */
 #undef HAVE_ERF
 
 /* Define to 1 if you have the <errno.h> header file. */
 #undef HAVE_ERRNO_H
 
 /* Define to 1 if you have the `execvp' function. */
 #undef HAVE_EXECVP
 
 /* Define to 1 if you have the `fchmod' function. */
 #undef HAVE_FCHMOD
 
 /* Define to 1 if you have the <fcntl.h> header file. */
 #undef HAVE_FCNTL_H
 
 /* Define to 1 if the system has the type `float_t'. */
 #undef HAVE_FLOAT_T
 
 /* Define to 1 if you have the `floor' function. */
 #undef HAVE_FLOOR
 
 /* Define to 1 if you have the `fork' function. */
 #undef HAVE_FORK
 
 /* Define to 1 if fseeko (and presumably ftello) exists and is declared. */
 #undef HAVE_FSEEKO
 
 /* Define to 1 if you have the `ftime' function. */
 #undef HAVE_FTIME
 
 /* Define to 1 if you have the `ftruncate' function. */
 #undef HAVE_FTRUNCATE
 
 /* Define to 1 if you have the `getcwd' function. */
 #undef HAVE_GETCWD
 
 /* Define to 1 if you have the `getc_unlocked' function. */
 #undef HAVE_GETC_UNLOCKED
 
 /* Define to 1 if you have the `getdtablesize' function. */
 #undef HAVE_GETDTABLESIZE
 
 /* Define to 1 if you have the `getexecname' function. */
 #undef HAVE_GETEXECNAME
 
 /* Define to 1 if you have the `getpagesize' function. */
 #undef HAVE_GETPAGESIZE
 
 /* Define to 1 if you have the `getpid' function. */
 #undef HAVE_GETPID
 
 /* Define to 1 if you have the `getrlimit' function. */
 #undef HAVE_GETRLIMIT
 
 /* Define to 1 if you have the `getrusage' function. */
 #undef HAVE_GETRUSAGE
 
 /* Define to 1 if you have the `gettimeofday' function. */
 #undef HAVE_GETTIMEOFDAY
 
 /* Define to 1 if you have the `gmtime_r' function. */
 #undef HAVE_GMTIME_R
 
 /* Compile with hugepage support */
 #undef HAVE_HUGEPAGES
 
 /* Define to 1 if the system has the type `intmax_t'. */
 #undef HAVE_INTMAX_T
 
 /* Define to 1 if the system has the type `intptr_t'. */
 #undef HAVE_INTPTR_T
 
 /* Define to 1 if you have the <inttypes.h> header file. */
 #undef HAVE_INTTYPES_H
 
 /* Define to 1 if you have the `isnan' function. */
 #undef HAVE_ISNAN
 
 /* Define to 1 if you have the `j0' function. */
 #undef HAVE_J0
 
 /* Define to 1 if you have the `j1' function. */
 #undef HAVE_J1
 
 /* Define if you have the <lcms2.h> header file. */
 #undef HAVE_LCMS2_H
 
 /* Define if you have the <lcms2/lcms2.h> header file. */
 #undef HAVE_LCMS2_LCMS2_H
 
 /* Define to 1 if you have the `gcov' library (-lgcov). */
 #undef HAVE_LIBGCOV
 
 /* Define to 1 if you have the <limits.h> header file. */
 #undef HAVE_LIMITS_H
 
 /* Define to 1 if you have the <linux/unistd.h> header file. */
 #undef HAVE_LINUX_UNISTD_H
 
 /* Define to 1 if you have the `lltostr' function. */
 #undef HAVE_LLTOSTR
 
 /* Define to 1 if you have the <locale.h> header file. */
 #undef HAVE_LOCALE_H
 
 /* Define to 1 if the system has the type `locale_t'. */
 #undef HAVE_LOCALE_T
 
 /* Define to 1 if you have the `localtime_r' function. */
 #undef HAVE_LOCALTIME_R
 
 /* Define to 1 if the system has the type `long double'. */
 #undef HAVE_LONG_DOUBLE
 
 /* Define to 1 if the type `long double' works and has more range or precision
    than `double'. */
 #undef HAVE_LONG_DOUBLE_WIDER
 
 /* Define to 1 if the system has the type `long long int'. */
 #undef HAVE_LONG_LONG_INT
 
 /* Define to 1 if you have the `lstat' function. */
 #undef HAVE_LSTAT
 
 /* Define to 1 if you have the <machine/param.h> header file. */
 #undef HAVE_MACHINE_PARAM_H
 
 /* Define to 1 if you have the <mach-o/dyld.h> header file. */
 #undef HAVE_MACH_O_DYLD_H
 
 /* Define to 1 if <wchar.h> declares mbstate_t. */
 #undef HAVE_MBSTATE_T
 
 /* Define to 1 if you have the `memmove' function. */
 #undef HAVE_MEMMOVE
 
 /* Define to 1 if you have the <memory.h> header file. */
 #undef HAVE_MEMORY_H
 
 /* Define to 1 if you have the `memset' function. */
 #undef HAVE_MEMSET
 
 /* Define to 1 if you have the `mkstemp' function. */
 #undef HAVE_MKSTEMP
 
 /* Define to 1 if you have a working `mmap' system call. */
 #undef HAVE_MMAP
 
 /* Define to 1 if you have the `munmap' function. */
 #undef HAVE_MUNMAP
 
 /* define if the compiler implements namespaces */
 #undef HAVE_NAMESPACES
 
 /* Define if g++ supports namespace std. */
 #undef HAVE_NAMESPACE_STD
 
 /* Define to 1 if you have the `nanosleep' function. */
 #undef HAVE_NANOSLEEP
 
 /* Define to 1 if you have the <ndir.h> header file, and it defines `DIR'. */
 #undef HAVE_NDIR_H
 
 /* Define to 1 if you have the <netinet/in.h> header file. */
 #undef HAVE_NETINET_IN_H
 
 /* Define to 1 if you have the `newlocale' function. */
 #undef HAVE_NEWLOCALE
 
 /* Define to 1 if you have the <OpenCL/cl.h> header file. */
 #undef HAVE_OPENCL_CL_H
 
 /* Define to 1 if you have the <OS.h> header file. */
 #undef HAVE_OS_H
 
 /* Define to 1 if you have the `pclose' function. */
 #undef HAVE_PCLOSE
 
 /* Define to 1 if you have the `poll' function. */
 #undef HAVE_POLL
 
 /* Define to 1 if you have the `popen' function. */
 #undef HAVE_POPEN
 
 /* Define to 1 if you have the `posix_fadvise' function. */
 #undef HAVE_POSIX_FADVISE
 
 /* Define to 1 if you have the `posix_fallocate' function. */
 #undef HAVE_POSIX_FALLOCATE
 
 /* Define to 1 if you have the `posix_madvise' function. */
 #undef HAVE_POSIX_MADVISE
 
 /* Define to 1 if you have the `posix_memalign' function. */
 #undef HAVE_POSIX_MEMALIGN
 
 /* Define to 1 if you have the `posix_spawnp' function. */
 #undef HAVE_POSIX_SPAWNP
 
 /* Define to 1 if you have the `pow' function. */
 #undef HAVE_POW
 
 /* Define to 1 if you have the `pread' function. */
 #undef HAVE_PREAD
 
 /* Define to 1 if you have the <process.h> header file. */
 #undef HAVE_PROCESS_H
 
 /* Define if you have POSIX threads libraries and header files. */
 #undef HAVE_PTHREAD
 
 /* Have PTHREAD_PRIO_INHERIT. */
 #undef HAVE_PTHREAD_PRIO_INHERIT
 
 /* Define to 1 if you have the `pwrite' function. */
 #undef HAVE_PWRITE
 
 /* Define to 1 if you have the `qsort_r' function. */
 #undef HAVE_QSORT_R
 
 /* Define to 1 if you have the `raise' function. */
 #undef HAVE_RAISE
 
 /* Define to 1 if you have the `rand_r' function. */
 #undef HAVE_RAND_R
 
 /* Define to 1 if you have the `readlink' function. */
 #undef HAVE_READLINK
 
 /* Define to 1 if you have the `realpath' function. */
 #undef HAVE_REALPATH
 
 /* Define to 1 if you have the `seekdir' function. */
 #undef HAVE_SEEKDIR
 
 /* Define to 1 if you have the `select' function. */
 #undef HAVE_SELECT
 
 /* Define to 1 if you have the `sendfile' function. */
 #undef HAVE_SENDFILE
 
 /* Define to 1 if you have the `setlocale' function. */
 #undef HAVE_SETLOCALE
 
 /* Define to 1 if you have the `setvbuf' function. */
 #undef HAVE_SETVBUF
 
 /* X11 server supports shape extension */
 #undef HAVE_SHAPE
 
 /* X11 server supports shared memory extension */
 #undef HAVE_SHARED_MEMORY
 
 /* Define to 1 if you have the `sigaction' function. */
 #undef HAVE_SIGACTION
 
 /* Define to 1 if you have the `sigemptyset' function. */
 #undef HAVE_SIGEMPTYSET
 
 /* Define to 1 if you have the `socket' function. */
 #undef HAVE_SOCKET
 
 /* Define to 1 if you have the `spawnvp' function. */
 #undef HAVE_SPAWNVP
 
 /* Define to 1 if you have the `sqrt' function. */
 #undef HAVE_SQRT
 
 /* Define to 1 if you have the `stat' function. */
 #undef HAVE_STAT
 
 /* Define to 1 if you have the <stdarg.h> header file. */
 #undef HAVE_STDARG_H
 
 /* Define to 1 if stdbool.h conforms to C99. */
 #undef HAVE_STDBOOL_H
 
 /* Define to 1 if you have the <stdint.h> header file. */
 #undef HAVE_STDINT_H
 
 /* Define to 1 if you have the <stdlib.h> header file. */
 #undef HAVE_STDLIB_H
 
 /* define if the compiler supports ISO C++ standard library */
 #undef HAVE_STD_LIBS
 
 /* Define to 1 if you have the `strcasecmp' function. */
 #undef HAVE_STRCASECMP
 
+/* Define to 1 if you have the `strcasestr' function. */
+#undef HAVE_STRCASESTR
+
 /* Define to 1 if you have the `strchr' function. */
 #undef HAVE_STRCHR
 
 /* Define to 1 if you have the `strcspn' function. */
 #undef HAVE_STRCSPN
 
 /* Define to 1 if you have the `strdup' function. */
 #undef HAVE_STRDUP
 
 /* Define to 1 if you have the `strerror' function. */
 #undef HAVE_STRERROR
 
 /* Define to 1 if you have the `strerror_r' function. */
 #undef HAVE_STRERROR_R
 
 /* Define to 1 if cpp supports the ANSI # stringizing operator. */
 #undef HAVE_STRINGIZE
 
 /* Define to 1 if you have the <strings.h> header file. */
 #undef HAVE_STRINGS_H
 
 /* Define to 1 if you have the <string.h> header file. */
 #undef HAVE_STRING_H
 
 /* Define to 1 if you have the `strlcat' function. */
 #undef HAVE_STRLCAT
 
 /* Define to 1 if you have the `strlcpy' function. */
 #undef HAVE_STRLCPY
 
 /* Define to 1 if you have the `strncasecmp' function. */
 #undef HAVE_STRNCASECMP
 
 /* Define to 1 if you have the `strpbrk' function. */
 #undef HAVE_STRPBRK
 
 /* Define to 1 if you have the `strrchr' function. */
 #undef HAVE_STRRCHR
 
 /* Define to 1 if you have the `strspn' function. */
 #undef HAVE_STRSPN
 
 /* Define to 1 if you have the `strstr' function. */
 #undef HAVE_STRSTR
 
 /* Define to 1 if you have the `strtod' function. */
 #undef HAVE_STRTOD
 
 /* Define to 1 if you have the `strtod_l' function. */
 #undef HAVE_STRTOD_L
 
 /* Define to 1 if you have the `strtol' function. */
 #undef HAVE_STRTOL
 
 /* Define to 1 if you have the `strtoul' function. */
 #undef HAVE_STRTOUL
 
 /* Define to 1 if `tm_zone' is a member of `struct tm'. */
 #undef HAVE_STRUCT_TM_TM_ZONE
 
 /* Define to 1 if you have the <sun_prefetch.h> header file. */
 #undef HAVE_SUN_PREFETCH_H
 
 /* Define to 1 if you have the `symlink' function. */
 #undef HAVE_SYMLINK
 
 /* Define to 1 if you have the `sysconf' function. */
 #undef HAVE_SYSCONF
 
 /* Define to 1 if you have the <sys/dir.h> header file, and it defines `DIR'.
    */
 #undef HAVE_SYS_DIR_H
 
 /* Define to 1 if you have the <sys/ipc.h> header file. */
 #undef HAVE_SYS_IPC_H
 
 /* Define to 1 if you have the <sys/mman.h> header file. */
 #undef HAVE_SYS_MMAN_H
 
 /* Define to 1 if you have the <sys/ndir.h> header file, and it defines `DIR'.
    */
 #undef HAVE_SYS_NDIR_H
 
 /* Define to 1 if you have the <sys/param.h> header file. */
 #undef HAVE_SYS_PARAM_H
 
 /* Define to 1 if you have the <sys/resource.h> header file. */
 #undef HAVE_SYS_RESOURCE_H
 
 /* Define to 1 if you have the <sys/select.h> header file. */
 #undef HAVE_SYS_SELECT_H
 
 /* Define to 1 if you have the <sys/sendfile.h> header file. */
 #undef HAVE_SYS_SENDFILE_H
 
 /* Define to 1 if you have the <sys/socket.h> header file. */
 #undef HAVE_SYS_SOCKET_H
 
 /* Define to 1 if you have the <sys/stat.h> header file. */
 #undef HAVE_SYS_STAT_H
 
 /* Define to 1 if you have the <sys/syslimits.h> header file. */
 #undef HAVE_SYS_SYSLIMITS_H
 
 /* Define to 1 if you have the <sys/timeb.h> header file. */
 #undef HAVE_SYS_TIMEB_H
 
 /* Define to 1 if you have the <sys/times.h> header file. */
 #undef HAVE_SYS_TIMES_H
 
 /* Define to 1 if you have the <sys/time.h> header file. */
 #undef HAVE_SYS_TIME_H
 
 /* Define to 1 if you have the <sys/types.h> header file. */
 #undef HAVE_SYS_TYPES_H
 
 /* Define to 1 if you have the <sys/wait.h> header file. */
 #undef HAVE_SYS_WAIT_H
 
 /* Define if you have the tcmalloc memory allocation library */
 #undef HAVE_TCMALLOC
 
 /* Define to 1 if you have the `telldir' function. */
 #undef HAVE_TELLDIR
 
 /* Define to 1 if you have the `tempnam' function. */
 #undef HAVE_TEMPNAM
 
 /* Define to 1 if you have the <tiffconf.h> header file. */
 #undef HAVE_TIFFCONF_H
 
 /* Define to 1 if you have the `TIFFIsBigEndian' function. */
 #undef HAVE_TIFFISBIGENDIAN
 
 /* Define to 1 if you have the `TIFFIsCODECConfigured' function. */
 #undef HAVE_TIFFISCODECCONFIGURED
 
 /* Define to 1 if you have the `TIFFMergeFieldInfo' function. */
 #undef HAVE_TIFFMERGEFIELDINFO
 
 /* Define to 1 if you have the `TIFFReadEXIFDirectory' function. */
 #undef HAVE_TIFFREADEXIFDIRECTORY
 
 /* Define to 1 if you have the `TIFFSetErrorHandlerExt' function. */
 #undef HAVE_TIFFSETERRORHANDLEREXT
 
 /* Define to 1 if you have the `TIFFSetTagExtender' function. */
 #undef HAVE_TIFFSETTAGEXTENDER
 
 /* Define to 1 if you have the `TIFFSetWarningHandlerExt' function. */
 #undef HAVE_TIFFSETWARNINGHANDLEREXT
 
 /* Define to 1 if you have the `TIFFSwabArrayOfTriples' function. */
 #undef HAVE_TIFFSWABARRAYOFTRIPLES
 
 /* Define to 1 if you have the `times' function. */
 #undef HAVE_TIMES
 
 /* Define to 1 if your `struct tm' has `tm_zone'. Deprecated, use
    `HAVE_STRUCT_TM_TM_ZONE' instead. */
 #undef HAVE_TM_ZONE
 
 /* Define to 1 if you don't have `tm_zone' but do have the external array
    `tzname'. */
 #undef HAVE_TZNAME
 
 /* Define to 1 if the system has the type `uintmax_t'. */
 #undef HAVE_UINTMAX_T
 
 /* Define to 1 if the system has the type `uintptr_t'. */
 #undef HAVE_UINTPTR_T
 
 /* Define to 1 if you have the `ulltostr' function. */
 #undef HAVE_ULLTOSTR
 
 /* Define if you have umem memory allocation library */
 #undef HAVE_UMEM
 
 /* Define to 1 if you have the <unistd.h> header file. */
 #undef HAVE_UNISTD_H
 
 /* Define to 1 if the system has the type `unsigned long long int'. */
 #undef HAVE_UNSIGNED_LONG_LONG_INT
 
 /* Define to 1 if you have the `uselocale' function. */
 #undef HAVE_USELOCALE
 
 /* Define to 1 if you have the `usleep' function. */
 #undef HAVE_USLEEP
 
 /* Define to 1 if you have the `utime' function. */
 #undef HAVE_UTIME
 
 /* Define to 1 if you have the <utime.h> header file. */
 #undef HAVE_UTIME_H
 
 /* Define to 1 if you have the `vfork' function. */
 #undef HAVE_VFORK
 
 /* Define to 1 if you have the <vfork.h> header file. */
 #undef HAVE_VFORK_H
 
 /* Define to 1 if you have the `vfprintf' function. */
 #undef HAVE_VFPRINTF
 
 /* Define to 1 if you have the `vfprintf_l' function. */
 #undef HAVE_VFPRINTF_L
 
 /* Define to 1 if you have the `vprintf' function. */
 #undef HAVE_VPRINTF
 
 /* Define to 1 if you have the `vsnprintf' function. */
 #undef HAVE_VSNPRINTF
 
 /* Define to 1 if you have the `vsnprintf_l' function. */
 #undef HAVE_VSNPRINTF_L
 
 /* Define to 1 if you have the `vsprintf' function. */
 #undef HAVE_VSPRINTF
 
 /* Define to 1 if you have the `waitpid' function. */
 #undef HAVE_WAITPID
 
 /* Define to 1 if you have the <wchar.h> header file. */
 #undef HAVE_WCHAR_H
 
 /* Define to 1 if you have the <windows.h> header file. */
 #undef HAVE_WINDOWS_H
 
 /* Define to 1 if `fork' works. */
 #undef HAVE_WORKING_FORK
 
 /* Define to 1 if `vfork' works. */
 #undef HAVE_WORKING_VFORK
 
 /* Define to 1 if you have the <xlocale.h> header file. */
 #undef HAVE_XLOCALE_H
 
 /* Define to 1 if you have the `_aligned_malloc' function. */
 #undef HAVE__ALIGNED_MALLOC
 
 /* Define to 1 if the system has the type `_Bool'. */
 #undef HAVE__BOOL
 
 /* Define to 1 if you have the `_exit' function. */
 #undef HAVE__EXIT
 
 /* Define to 1 if you have the `_NSGetExecutablePath' function. */
 #undef HAVE__NSGETEXECUTABLEPATH
 
 /* Define to 1 if you have the `_pclose' function. */
 #undef HAVE__PCLOSE
 
 /* Define to 1 if you have the `_popen' function. */
 #undef HAVE__POPEN
 
 /* Define to 1 if you have the `_wfopen' function. */
 #undef HAVE__WFOPEN
 
 /* Define to 1 if you have the `_wstat' function. */
 #undef HAVE__WSTAT
 
 /* define if your compiler has __attribute__ */
 #undef HAVE___ATTRIBUTE__
 
 /* Whether hdri is enabled or not */
 #undef HDRI_ENABLE_OBSOLETE_IN_H
 
 /* Define if you have libheif library */
 #undef HEIC_DELEGATE
 
 /* Define if you have jemalloc memory allocation library */
 #undef HasJEMALLOC
 
 /* Directory where ImageMagick architecture headers live. */
 #undef INCLUDEARCH_PATH
 
 /* Directory where ImageMagick headers live. */
 #undef INCLUDE_PATH
 
 /* ImageMagick is formally installed under prefix */
 #undef INSTALLED_SUPPORT
 
 /* Define if you have JBIG library */
 #undef JBIG_DELEGATE
 
 /* Define if you have JPEG library */
 #undef JPEG_DELEGATE
 
 /* Define if you have brunsli library */
 #undef JXL_DELEGATE
 
 /* Define if you have LCMS library */
 #undef LCMS_DELEGATE
 
 /* Define if you have OPENJP2 library */
 #undef LIBOPENJP2_DELEGATE
 
 /* Directory where architecture-dependent files live. */
 #undef LIBRARY_PATH
 
 /* Subdirectory of lib where ImageMagick architecture dependent files are
    installed. */
 #undef LIBRARY_RELATIVE_PATH
 
 /* Binaries in libraries path base name (will be during install linked to bin)
    */
 #undef LIB_BIN_BASEDIRNAME
 
 /* Define if you have LQR library */
 #undef LQR_DELEGATE
 
 /* Define if using libltdl to support dynamically loadable modules and OpenCL
    */
 #undef LTDL_DELEGATE
 
 /* Native module suffix */
 #undef LTDL_MODULE_EXT
 
 /* Define to the sub-directory where libtool stores uninstalled libraries. */
 #undef LT_OBJDIR
 
 /* Define if you have LZMA library */
 #undef LZMA_DELEGATE
 
 /* Define to prepend to default font search path. */
 #undef MAGICK_FONT_PATH
 
 /* Target Host CPU */
 #undef MAGICK_TARGET_CPU
 
 /* Target Host OS */
 #undef MAGICK_TARGET_OS
 
 /* Target Host Vendor */
 #undef MAGICK_TARGET_VENDOR
 
 /* Module directory name without ABI part. */
 #undef MODULES_BASEDIRNAME
 
 /* Module directory dirname */
 #undef MODULES_DIRNAME
 
 /* Magick API method prefix */
 #undef NAMESPACE_PREFIX
 
 /* Magick API method prefix tag */
 #undef NAMESPACE_PREFIX_TAG
 
 /* Define to 1 if assertions should be disabled. */
 #undef NDEBUG
 
 /* Define if you have OPENEXR library */
 #undef OPENEXR_DELEGATE
 
 /* Name of package */
 #undef PACKAGE
 
 /* Define to the address where bug reports for this package should be sent. */
 #undef PACKAGE_BUGREPORT
 
 /* Define to the full name of this package. */
 #undef PACKAGE_NAME
 
 /* Define to the full name and version of this package. */
 #undef PACKAGE_STRING
 
 /* Define to the one symbol short name of this package. */
 #undef PACKAGE_TARNAME
 
 /* Define to the home page for this package. */
 #undef PACKAGE_URL
 
 /* Define to the version of this package. */
 #undef PACKAGE_VERSION
 
 /* Define if you have PANGOCAIRO library */
 #undef PANGOCAIRO_DELEGATE
 
 /* Define if you have PANGO library */
 #undef PANGO_DELEGATE
 
 /* enable pipes (|) in filenames */
 #undef PIPES_SUPPORT
 
 /* Define if you have PNG library */
 #undef PNG_DELEGATE
 
 /* Define to necessary symbol if this constant uses a non-standard name on
    your system. */
 #undef PTHREAD_CREATE_JOINABLE
 
 /* Pixel cache threshold in MB (defaults to available memory) */
 #undef PixelCacheThreshold
 
 /* Number of bits in a pixel Quantum (8/16/32/64) */
 #undef QUANTUM_DEPTH_OBSOLETE_IN_H
 
 /* Define if you have RAQM library */
 #undef RAQM_DELEGATE
 
 /* Define if you have LIBRAW library */
 #undef RAW_R_DELEGATE
 
 /* Define as the return type of signal handlers (`int' or `void'). */
 #undef RETSIGTYPE
 
 /* Define if you have RSVG library */
 #undef RSVG_DELEGATE
 
 /* Define to the type of arg 1 for `select'. */
 #undef SELECT_TYPE_ARG1
 
 /* Define to the type of args 2, 3 and 4 for `select'. */
 #undef SELECT_TYPE_ARG234
 
 /* Define to the type of arg 5 for `select'. */
 #undef SELECT_TYPE_ARG5
 
 /* Sharearch directory name without ABI part. */
 #undef SHAREARCH_BASEDIRNAME
 
 /* Sharearch directory dirname */
 #undef SHAREARCH_DIRNAME
 
 /* Directory where architecture-independent configuration files live. */
 #undef SHARE_PATH
 
 /* Subdirectory of lib where architecture-independent configuration files
    live. */
 #undef SHARE_RELATIVE_PATH
 
 /* The size of `double', as computed by sizeof. */
 #undef SIZEOF_DOUBLE
 
 /* The size of `double_t', as computed by sizeof. */
 #undef SIZEOF_DOUBLE_T
 
 /* The size of `float', as computed by sizeof. */
 #undef SIZEOF_FLOAT
 
 /* The size of `float_t', as computed by sizeof. */
 #undef SIZEOF_FLOAT_T
 
 /* The size of `long double', as computed by sizeof. */
 #undef SIZEOF_LONG_DOUBLE
 
 /* The size of `off_t', as computed by sizeof. */
 #undef SIZEOF_OFF_T
 
 /* The size of `signed int', as computed by sizeof. */
 #undef SIZEOF_SIGNED_INT
 
 /* The size of `signed long', as computed by sizeof. */
 #undef SIZEOF_SIGNED_LONG
 
 /* The size of `signed long long', as computed by sizeof. */
 #undef SIZEOF_SIGNED_LONG_LONG
 
 /* The size of `signed short', as computed by sizeof. */
 #undef SIZEOF_SIGNED_SHORT
 
 /* The size of `size_t', as computed by sizeof. */
 #undef SIZEOF_SIZE_T
 
 /* The size of `ssize_t', as computed by sizeof. */
 #undef SIZEOF_SSIZE_T
 
 /* The size of `unsigned int', as computed by sizeof. */
 #undef SIZEOF_UNSIGNED_INT
 
 /* The size of `unsigned int*', as computed by sizeof. */
 #undef SIZEOF_UNSIGNED_INTP
 
 /* The size of `unsigned long', as computed by sizeof. */
 #undef SIZEOF_UNSIGNED_LONG
 
 /* The size of `unsigned long long', as computed by sizeof. */
 #undef SIZEOF_UNSIGNED_LONG_LONG
 
 /* The size of `unsigned short', as computed by sizeof. */
 #undef SIZEOF_UNSIGNED_SHORT
 
 /* Define to 1 if the `S_IS*' macros in <sys/stat.h> do not work properly. */
 #undef STAT_MACROS_BROKEN
 
 /* Define to 1 if you have the ANSI C header files. */
 #undef STDC_HEADERS
 
 /* Define to 1 if strerror_r returns char *. */
 #undef STRERROR_R_CHAR_P
 
 /* Define if you have POSIX threads libraries and header files. */
 #undef THREAD_SUPPORT
 
 /* Define if you have TIFF library */
 #undef TIFF_DELEGATE
 
 /* Define to 1 if you can safely include both <sys/time.h> and <time.h>. */
 #undef TIME_WITH_SYS_TIME
 
 /* Define to 1 if your <sys/time.h> declares `struct tm'. */
 #undef TM_IN_SYS_TIME
 
 /* Enable extensions on AIX 3, Interix.  */
 #ifndef _ALL_SOURCE
 # undef _ALL_SOURCE
 #endif
 /* Enable GNU extensions on systems that have them.  */
 #ifndef _GNU_SOURCE
 # undef _GNU_SOURCE
 #endif
 /* Enable threading extensions on Solaris.  */
 #ifndef _POSIX_PTHREAD_SEMANTICS
 # undef _POSIX_PTHREAD_SEMANTICS
 #endif
 /* Enable extensions on HP NonStop.  */
 #ifndef _TANDEM_SOURCE
 # undef _TANDEM_SOURCE
 #endif
 /* Enable general extensions on Solaris.  */
 #ifndef __EXTENSIONS__
 # undef __EXTENSIONS__
 #endif
 
 
 /* Version number of package */
 #undef VERSION
 
 /* Define if you have WEBPMUX library */
 #undef WEBPMUX_DELEGATE
 
 /* Define if you have WEBP library */
 #undef WEBP_DELEGATE
 
 /* Define to use the Windows GDI32 library */
 #undef WINGDI32_DELEGATE
 
 /* Define if using the dmalloc debugging malloc package */
 #undef WITH_DMALLOC
 
 /* Define if you have WMF library */
 #undef WMF_DELEGATE
 
 /* Define WORDS_BIGENDIAN to 1 if your processor stores words with the most
    significant byte first (like Motorola and SPARC, unlike Intel). */
 #if defined AC_APPLE_UNIVERSAL_BUILD
 # if defined __BIG_ENDIAN__
 #  define WORDS_BIGENDIAN 1
 # endif
 #else
 # ifndef WORDS_BIGENDIAN
 #  undef WORDS_BIGENDIAN
 # endif
 #endif
 
 /* Location of X11 configure files */
 #undef X11_CONFIGURE_PATH
 
 /* Define if you have X11 library */
 #undef X11_DELEGATE
 
 /* Define if you have XML library */
 #undef XML_DELEGATE
 
 /* Define to 1 if the X Window System is missing or not being used. */
 #undef X_DISPLAY_MISSING
 
 /* Build self-contained, embeddable, zero-configuration ImageMagick */
 #undef ZERO_CONFIGURATION_SUPPORT
 
 /* Define if you have ZLIB library */
 #undef ZLIB_DELEGATE
 
 /* Define if you have ZSTD library */
 #undef ZSTD_DELEGATE
 
 /* Enable large inode numbers on Mac OS X 10.5.  */
 #ifndef _DARWIN_USE_64_BIT_INODE
 # define _DARWIN_USE_64_BIT_INODE 1
 #endif
 
 /* Number of bits in a file offset, on hosts where this is settable. */
 #undef _FILE_OFFSET_BITS
 
 /* enable run-time bounds-checking */
 #undef _FORTIFY_SOURCE
 
 /* Define to 1 to make fseeko visible on some hosts (e.g. glibc 2.2). */
 #undef _LARGEFILE_SOURCE
 
 /* Define for large files, on AIX-style hosts. */
 #undef _LARGE_FILES
 
 /* Define to 1 if on MINIX. */
 #undef _MINIX
 
 /* Define this for the OpenCL Accelerator */
 #undef _OPENCL
 
 /* Define to 2 if the system does not provide POSIX.1 features except with
    this defined. */
 #undef _POSIX_1_SOURCE
 
 /* Define to 1 if you need to in order for `stat' and other things to work. */
 #undef _POSIX_SOURCE
 
 /* Define for Solaris 2.5.1 so the uint32_t typedef from <sys/synch.h>,
    <pthread.h>, or <semaphore.h> is not used. If the typedef were allowed, the
    #define below would cause a syntax error. */
 #undef _UINT32_T
 
 /* Define for Solaris 2.5.1 so the uint64_t typedef from <sys/synch.h>,
    <pthread.h>, or <semaphore.h> is not used. If the typedef were allowed, the
    #define below would cause a syntax error. */
 #undef _UINT64_T
 
 /* Define for Solaris 2.5.1 so the uint8_t typedef from <sys/synch.h>,
    <pthread.h>, or <semaphore.h> is not used. If the typedef were allowed, the
    #define below would cause a syntax error. */
 #undef _UINT8_T
 
 /* Define to 1 if type `char' is unsigned and you are not using gcc.  */
 #ifndef __CHAR_UNSIGNED__
 # undef __CHAR_UNSIGNED__
 #endif
 
 /* Define to appropriate substitute if compiler does not have __func__ */
 #undef __func__
 
 /* Define to empty if `const' does not conform to ANSI C. */
 #undef const
 
 /* Define to `int' if <sys/types.h> doesn't define. */
 #undef gid_t
 
 /* Define to `__inline__' or `__inline' if that's what the C compiler
    calls it, or to nothing if 'inline' is not supported under any name.  */
 #ifndef __cplusplus
 #undef inline
 #endif
 
 /* Define to the type of a signed integer type of width exactly 16 bits if
    such a type exists and the standard includes do not define it. */
 #undef int16_t
 
 /* Define to the type of a signed integer type of width exactly 32 bits if
    such a type exists and the standard includes do not define it. */
 #undef int32_t
 
 /* Define to the type of a signed integer type of width exactly 64 bits if
    such a type exists and the standard includes do not define it. */
 #undef int64_t
 
 /* Define to the type of a signed integer type of width exactly 8 bits if such
    a type exists and the standard includes do not define it. */
 #undef int8_t
 
 /* Define to the widest signed integer type if <stdint.h> and <inttypes.h> do
    not define. */
 #undef intmax_t
 
 /* Define to the type of a signed integer type wide enough to hold a pointer,
    if such a type exists, and if the system does not define it. */
 #undef intptr_t
 
 /* Define to a type if <wchar.h> does not define. */
 #undef mbstate_t
 
 /* Define to `int' if <sys/types.h> does not define. */
 #undef mode_t
 
 /* Define to `long int' if <sys/types.h> does not define. */
 #undef off_t
 
 /* Define to `int' if <sys/types.h> does not define. */
 #undef pid_t
 
 /* Define to the equivalent of the C99 'restrict' keyword, or to
    nothing if this is not supported.  Do not define if restrict is
    supported directly.  */
 #undef restrict
 /* Work around a bug in Sun C++: it does not support _Restrict or
    __restrict__, even though the corresponding Sun C compiler ends up with
    "#define restrict _Restrict" or "#define restrict __restrict__" in the
    previous line.  Perhaps some future version of Sun C++ will work with
    restrict; if so, hopefully it defines __RESTRICT like Sun C does.  */
 #if defined __SUNPRO_CC && !defined __RESTRICT
 # define _Restrict
 # define __restrict__
 #endif
 
 /* Define to `unsigned int' if <sys/types.h> does not define. */
 #undef size_t
 
 /* Define to `int' if <sys/types.h> does not define. */
 #undef ssize_t
 
 /* Define to `int' if <sys/types.h> doesn't define. */
 #undef uid_t
 
 /* Define to the type of an unsigned integer type of width exactly 16 bits if
    such a type exists and the standard includes do not define it. */
 #undef uint16_t
 
 /* Define to the type of an unsigned integer type of width exactly 32 bits if
    such a type exists and the standard includes do not define it. */
 #undef uint32_t
 
 /* Define to the type of an unsigned integer type of width exactly 64 bits if
    such a type exists and the standard includes do not define it. */
 #undef uint64_t
 
 /* Define to the type of an unsigned integer type of width exactly 8 bits if
    such a type exists and the standard includes do not define it. */
 #undef uint8_t
 
 /* Define to the widest unsigned integer type if <stdint.h> and <inttypes.h>
    do not define. */
 #undef uintmax_t
 
 /* Define to the type of an unsigned integer type wide enough to hold a
    pointer, if such a type exists, and if the system does not define it. */
 #undef uintptr_t
 
 /* Define as `fork' if `vfork' does not work. */
 #undef vfork
 
 /* Define to empty if the keyword `volatile' does not work. Warning: valid
    code using `volatile' can become incorrect without. Disable with care. */
 #undef volatile
diff --git a/configure b/configure
index 961ab5391..f043bc610 100755
--- a/configure
+++ b/configure
@@ -4581,7 +4581,7 @@ MAGICK_PATCHLEVEL_VERSION=69
 
 MAGICK_VERSION=7.0.8-69
 
-MAGICK_GIT_REVISION=16183:d158c5c7f:20191012
+MAGICK_GIT_REVISION=16237:a9b81c8d5:20191015
 
 
 # Substitute library versioning
@@ -34103,7 +34103,7 @@ fi
 
 # Check for functions
 #
-for ac_func in acosh _aligned_malloc asinh atanh atoll atexit cabs carg cimag creal clock clock_getres clock_gettime ctime_r directio erf _exit execvp fchmod floor fork ftime ftruncate getc_unlocked getcwd getpid getexecname getdtablesize getpagesize getrlimit getrusage gettimeofday gmtime_r isnan j0 j1 lltostr localtime_r lstat memmove memset mkstemp munmap nanosleep newlocale _NSGetExecutablePath pclose _pclose poll popen _popen posix_fadvise posix_fallocate posix_madvise posix_memalign posix_spawnp pow pread pwrite qsort_r raise rand_r readlink realpath select seekdir sendfile setlocale socket sqrt setvbuf stat strchr strrchr strcspn strdup strpbrk strspn strstr strtod strtod_l strtol strtoul symlink sysconf sigemptyset sigaction spawnvp strerror strlcat strlcpy strcasecmp strncasecmp telldir tempnam times ulltostr uselocale usleep utime vfprintf vfprintf_l vsprintf vsnprintf vsnprintf_l waitpid _wfopen _wstat
+for ac_func in acosh _aligned_malloc asinh atanh atoll atexit cabs carg cimag creal clock clock_getres clock_gettime ctime_r directio erf _exit execvp fchmod floor fork ftime ftruncate getc_unlocked getcwd getpid getexecname getdtablesize getpagesize getrlimit getrusage gettimeofday gmtime_r isnan j0 j1 lltostr localtime_r lstat memmove memset mkstemp munmap nanosleep newlocale _NSGetExecutablePath pclose _pclose poll popen _popen posix_fadvise posix_fallocate posix_madvise posix_memalign posix_spawnp pow pread pwrite qsort_r raise rand_r readlink realpath select seekdir sendfile setlocale socket sqrt setvbuf stat strcasestr strchr strrchr strcspn strdup strpbrk strspn strstr strtod strtod_l strtol strtoul symlink sysconf sigemptyset sigaction spawnvp strerror strlcat strlcpy strcasecmp strncasecmp telldir tempnam times ulltostr uselocale usleep utime vfprintf vfprintf_l vsprintf vsnprintf vsnprintf_l waitpid _wfopen _wstat
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
diff --git a/configure.ac b/configure.ac
index 89a777c40..65492adc3 100644
--- a/configure.ac
+++ b/configure.ac
@@ -3052,7 +3052,7 @@ dnl ===========================================================================
 
 # Check for functions
 #
-AC_CHECK_FUNCS([acosh _aligned_malloc asinh atanh atoll atexit cabs carg cimag creal clock clock_getres clock_gettime ctime_r directio erf _exit execvp fchmod floor fork ftime ftruncate getc_unlocked getcwd getpid getexecname getdtablesize getpagesize getrlimit getrusage gettimeofday gmtime_r isnan j0 j1 lltostr localtime_r lstat memmove memset mkstemp munmap nanosleep newlocale _NSGetExecutablePath pclose _pclose poll popen _popen posix_fadvise posix_fallocate posix_madvise posix_memalign posix_spawnp pow pread pwrite qsort_r raise rand_r readlink realpath select seekdir sendfile setlocale socket sqrt setvbuf stat strchr strrchr strcspn strdup strpbrk strspn strstr strtod strtod_l strtol strtoul symlink sysconf sigemptyset sigaction spawnvp strerror strlcat strlcpy strcasecmp strncasecmp telldir tempnam times ulltostr uselocale usleep utime vfprintf vfprintf_l vsprintf vsnprintf vsnprintf_l waitpid _wfopen _wstat])
+AC_CHECK_FUNCS([acosh _aligned_malloc asinh atanh atoll atexit cabs carg cimag creal clock clock_getres clock_gettime ctime_r directio erf _exit execvp fchmod floor fork ftime ftruncate getc_unlocked getcwd getpid getexecname getdtablesize getpagesize getrlimit getrusage gettimeofday gmtime_r isnan j0 j1 lltostr localtime_r lstat memmove memset mkstemp munmap nanosleep newlocale _NSGetExecutablePath pclose _pclose poll popen _popen posix_fadvise posix_fallocate posix_madvise posix_memalign posix_spawnp pow pread pwrite qsort_r raise rand_r readlink realpath select seekdir sendfile setlocale socket sqrt setvbuf stat strcasestr strchr strrchr strcspn strdup strpbrk strspn strstr strtod strtod_l strtol strtoul symlink sysconf sigemptyset sigaction spawnvp strerror strlcat strlcpy strcasecmp strncasecmp telldir tempnam times ulltostr uselocale usleep utime vfprintf vfprintf_l vsprintf vsnprintf vsnprintf_l waitpid _wfopen _wstat])
 
 # Substitute compiler name to build/link PerlMagick
 #
diff --git a/utilities/montage.1 b/utilities/montage.1
index 3abb4e0e6..54c2309e5 100644
--- a/utilities/montage.1
+++ b/utilities/montage.1
@@ -11,78 +11,79 @@ For more information about the montage command, point your browser to file:///us
 .SH DESCRIPTION
 Image Settings:
   \-adjoin              join images into a single multi-image file
   \-affine matrix       affine transform matrix
   \-alpha option        on, activate, off, deactivate, set, opaque, copy
                         transparent, extract, background, or shape
   \-authenticate value  decrypt image with this password
   \-blue-primary point  chromaticity blue primary point
   \-bordercolor color   border color
   \-caption string      assign a caption to an image
   \-colors value        preferred number of colors in the image
   \-colorspace type     alternate image colorsapce
   \-comment string      annotate image with comment
   \-compose operator    composite operator
   \-compress type       type of pixel compression when writing the image
   \-define format:option
                        define one or more image format options
+  \-delay value         display the next image after pausing
   \-density geometry    horizontal and vertical density of the image
   \-depth value         image depth
   \-display server      query font from this X server
   \-dispose method      layer disposal method
   \-dither method       apply error diffusion to image
   \-draw string         annotate the image with a graphic primitive
   \-encoding type       text encoding type
   \-endian type         endianness (MSB or LSB) of the image
   \-extract geometry    extract area from image
   \-fill color          color to use when filling a graphic primitive
   \-filter type         use this filter when resizing an image
   \-font name           render text with this font
   \-format "string"     output formatted image characteristics
   \-gamma value         level of gamma correction
   \-geometry geometry   preferred tile and border sizes
   \-gravity direction   which direction to gravitate towards
   \-green-primary point chromaticity green primary point
   \-identify            identify the format and characteristics of the image
   \-interlace type      type of image interlacing scheme
   \-interpolate method  pixel color interpolation method
   \-kerning value       set the space between two letters
   \-label string        assign a label to an image
   \-limit type value    pixel cache resource limit
   \-matte               store matte channel if the image has one
   \-mattecolor color    frame color
   \-mode type           framing style
   \-monitor             monitor progress
   \-page geometry       size and location of an image canvas (setting)
   \-pointsize value     font point size
   \-profile filename    add, delete, or apply an image profile
   \-quality value       JPEG/MIFF/PNG compression level
   \-quantize colorspace reduce colors in this colorspace
   \-quiet               suppress all warning messages
   \-red-primary point   chromaticity red primary point
   \-regard-warnings     pay attention to warning messages
   \-repage geometry     size and location of an image canvas (operator)
   \-respect-parentheses settings remain in effect until parenthesis boundary
   \-sampling-factor geometry
                        horizontal and vertical sampling factor
   \-scenes range        image scene range
   \-seed value          seed a new sequence of pseudo-random numbers
   \-set attribute value set an image attribute
   \-shadow              add a shadow beneath a tile to simulate depth
   \-size geometry       width and height of image
   \-stroke color        color to use when stroking a graphic primitive
   \-support factor      resize support: > 1.0 is blurry, < 1.0 is sharp
   \-synchronize         synchronize image to storage device
   \-taint               declare the image as modified
   \-texture filename    name of texture to tile onto the image background
   \-thumbnail geometry  create a thumbnail of the image
   \-tile geometry       number of tiles per row and column
   \-title string        decorate the montage image with a title
   \-transparent-color color
                        transparent color
   \-treedepth value     color tree depth
   \-trim                trim image edges
   \-units type          the units of image resolution
   \-verbose             print detailed information about the image
   \-virtual-pixel method
                        virtual pixel access method
   \-white-point point   chromaticity white point
@@ -90,26 +91,27 @@ Image Settings:
 Image Operators:
   \-adaptive-sharpen geometry
                        adaptively sharpen pixels; increase effect near edges
   \-annotate geometry text
                        annotate the image with text
   \-auto-orient         automagically orient image
   \-blur geometry      reduce image noise and reduce detail levels
   \-border geometry     surround image with a border of color
   \-channel mask        set the image channel mask
   \-crop geometry       preferred size and location of the cropped image
   \-extent geometry     set the image size
   \-flatten             flatten a sequence of images
   \-flip                flip image in the vertical direction
   \-flop                flop image in the horizontal direction
   \-frame geometry      surround image with an ornamental border
+  \-layers method       optimize or compare image layers
   \-monochrome          transform image to black and white
   \-polaroid angle      simulate a Polaroid picture
   \-resize geometry     resize the image
   \-rotate degrees      apply Paeth rotation to the image
   \-scale geometry      scale the image
   \-strip               strip image of all profiles and comments
   \-transform           affine transform image
   \-transpose           flip image vertically and rotate 90 degrees
   \-transparent color   make this color transparent within the image
   \-type type           image type
   \-unsharp geometry    sharpen the image
